{"file":"md-stock-price.entry.esm.js","mappings":"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","names":[],"sources":["src/components/stock-price/stock-price.css?tag=md-stock-price&encapsulation=shadow","src/components/stock-price/stock-price.tsx"],"sourcesContent":[":host {\n  display: block;\n  font-family: 'Inter', sans-serif;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  margin: 2rem auto;\n  padding: 1.5rem;\n  max-width: 400px;\n  background-color: #ffffff;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n:host(:hover) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\nform input {\n  font: inherit;\n  color: #333333;\n  padding: 0.5rem;\n  margin-bottom: 1rem;\n  width: calc(100% - 1rem);\n  border: 1px solid #ccc;\n  border-radius: 6px;\n  background-color: #f9f9f9;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n\n}\n\nform input:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 4px rgba(98, 0, 238, 0.4);\n}\n\nform button {\n  font: inherit;\n  padding: 0.5rem 1rem;\n  border: none;\n  border-radius: 6px;\n  background-color: var(--color-primary);\n  color: #ffffff;\n  cursor: pointer;\n  transition: background-color 0.3s ease, transform 0.2s ease;\n  width: 100%;\n}\n\nform button:hover {\n  background-color: var(--color-second);\n  transform: translateY(-2px);\n}\n\nform button:focus {\n  outline: none;\n  box-shadow: 0 0 6px rgba(98, 0, 238, 0.5);\n}\n\nform button:active {\n  transform: translateY(1px);\n}\n\nform button:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.content{\n  padding-top: 1rem;\n}\n\n.info{\n  display: flex;\n}\n\n.info-title{\n  width: 45%;\n  margin: 0;\n  font-weight: bold;\n  color: var(--color-primary);\n}\n\n.info-value{\n  width: 55%;\n  margin: 0;\n  padding-left: 1rem;\n}\n\n.error {\n  padding-top: 1rem;\n  color: red;\n  font-weight: bold;\n  font-size: 1rem;\n  text-align: center;\n}\n\n","import { Component, h, State, Prop, Watch, Listen } from '@stencil/core';\nimport { AV_API_KEY } from '../../global/global';\n\n@Component({\n  tag: 'md-stock-price',\n  styleUrl: 'stock-price.css',\n  shadow: true,\n})\nexport class StockPrice {\n  stockInput: HTMLInputElement | null = null;\n\n  @State() objResponse: any = null;\n  @State() stockUserInput: string = '';\n  @State() stockInputValid: boolean = false;\n  @State() error: string = '';\n  @State() loading: boolean = false;\n\n  @Prop() stockSymbol: string = '';\n\n  @Watch('stockSymbol')\n  stockSymbolChanged(newValue: string, oldValue: string){\n    if(newValue !== oldValue){\n      this.stockUserInput = newValue;\n      this.stockInputValid = true;\n      this.fetchStockPrice();\n    }\n  }\n\n  validateInput(input: string): boolean {\n    return /^[a-zA-Z0-9]+$/.test(input.trim());\n  }\n\n  onUserInput(event: Event) {\n    this.stockUserInput = (event.target as HTMLInputElement).value;\n\n    if (!this.stockUserInput.trim()) {\n      this.stockInputValid = false;\n      this.error = null;\n      this.objResponse = null;\n      return;\n    }\n\n    this.stockInputValid = this.validateInput(this.stockUserInput);\n    this.error = this.stockInputValid ? null : 'The symbol must contain only letters and numbers.';\n    this.objResponse = null;\n  }\n\n  onFetchStockPrice(event: Event) {\n    event.preventDefault();\n\n    if (!this.stockInputValid || !this.stockUserInput.trim()) {\n      this.error = 'Please provide a stock symbol.';\n      return;\n    }\n\n    this.loading = true;\n    this.error = null;\n\n    this.fetchStockPrice();\n  }\n\n  async fetchStockPrice(){\n    try {\n      const res = await fetch(\n        `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${this.stockUserInput}&apikey=${AV_API_KEY}`\n      );\n\n      if (!res.ok) {\n        throw new Error('Error fetching data. Please try again later.');\n      }\n\n      const parsedRes = await res.json();\n      if (!parsedRes['Global Quote'] || Object.keys(parsedRes['Global Quote']).length === 0) {\n        throw new Error('Invalid or not found symbol.');\n      }\n\n      this.objResponse = parsedRes;\n      // this.stockUserInput = '';\n      // this.stockInputValid = true;\n    } catch (err) {\n      this.error = err.message;\n      this.objResponse = null;\n      this.loading = false;\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  formatDollar(value: any): string {\n    const numericValue = parseFloat(value);\n    if(!value){\n      return 'N/A';\n    }\n\n    const valueString = numericValue.toString();\n    const [integerPart, decimalPart = ''] = valueString.split('.');\n\n    const truncatedDecimal = decimalPart.substring(0, 2).padEnd(2, '0');\n    return `$${integerPart},${truncatedDecimal}`;\n  }\n\n  formatDate(dateString: string): string {\n    if(!dateString){\n      return 'N/A';\n    }\n    const [year, month, day] = dateString.split('-');\n    return `${day}/${month}/${year}`;\n  }\n\n  // All lifecycle hooks\n  //function is called before render()\n  componentWillLoad(){\n    console.log('componentWillLoad');\n  }\n  componentDidLoad() {\n    if (this.stockSymbol) {\n      this.stockUserInput = this.stockSymbol;\n      this.stockInputValid = this.validateInput(this.stockSymbol);\n      if (this.stockInputValid) {\n        this.fetchStockPrice();\n      } else {\n        this.error = 'Invalid stock symbol.';\n      }\n    }\n  }\n  \n  componentWillUpdate(){\n    console.log('componentWillUpdate');\n  }  \n  componentDidUpdate(){\n    console.log('componentDidUpdate');\n  }\n  // componentDidUnload(){\n  //   console.log('componentDidUpdate');\n  // }\n\n  @Listen('mdsymbolSelected', { target: 'body' })\n  onStockSymbolSelected(event: CustomEvent){\n    if(event.detail && event.detail !== this.stockSymbol){\n      this.stockSymbol = event.detail;\n    }\n  }\n\n  render() {\n    let dataContent = null;\n  \n    if (this.error) {\n      dataContent = <p class=\"error\">{this.error}</p>;\n    } else if (this.objResponse) {\n      const globalQuote = this.objResponse?.['Global Quote'];\n      const symbol = globalQuote?.['01. symbol'] ?? 'N/A';\n      const price = this.formatDollar(globalQuote?.['05. price']);\n      const lastestDay = this.formatDate(globalQuote?.['07. latest trading day']);\n      const open = this.formatDollar(globalQuote?.['02. open']);\n      const high = this.formatDollar(globalQuote?.['03. high']);\n      const low = this.formatDollar(globalQuote?.['04. low']);\n  \n      dataContent = (\n        <div class=\"content\">\n          <div class=\"info\">\n            <p class=\"info-title\">Symbol:</p>\n            <p class=\"info-value\">{symbol}</p>\n          </div>\n          <div class=\"info\">\n            <p class=\"info-title\">Price:</p>\n            <p class=\"info-value\">{price}</p>\n          </div>\n          <div class=\"info\">\n            <p class=\"info-title\">Open:</p>\n            <p class=\"info-value\">{open}</p>\n          </div>\n          <div class=\"info\">\n            <p class=\"info-title\">High:</p>\n            <p class=\"info-value\">{high}</p>\n          </div>\n          <div class=\"info\">\n            <p class=\"info-title\">Low:</p>\n            <p class=\"info-value\">{low}</p>\n          </div>\n          <div class=\"info\">\n            <p class=\"info-title\">Latest trading day:</p>\n            <p class=\"info-value\">{lastestDay}</p>\n          </div>\n        </div>\n      );\n    }\n  \n    return (\n      <div>\n        <form onSubmit={this.onFetchStockPrice.bind(this)}>\n          <input\n            id=\"stock-symbol\"\n            ref={(el) => (this.stockInput = el)}\n            value={this.stockUserInput}\n            onInput={this.onUserInput.bind(this)}\n            placeholder=\"Enter stock symbol\"\n          />\n          <button\n            type=\"submit\"\n            disabled={!this.stockInputValid || this.loading}\n            aria-busy={this.loading}\n            aria-disabled={!this.stockInputValid || this.loading}\n          >\n            {this.loading ? 'Loading...' : 'Fetch'}\n          </button>\n        </form>\n        <div>\n        {dataContent}\n        </div>\n      </div>\n    );\n  }\n  \n}\n"],"version":3}